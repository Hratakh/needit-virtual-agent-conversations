<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">42413011379e7300ed0dded993990e35</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"a69594d46ddd4fc89a70aaf9b821f33a","triggerType":"request","id":"a69594d46ddd4fc89a70aaf9b821f33a"}],"goals":[{"name":"primary","trigger_id":"a69594d46ddd4fc89a70aaf9b821f33a","nodes":[{"type":"StartGoal","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessage(\"I can help you find and update NeedIt records for a type of request.\")"},"id":"ff5fc7104896499ba903b1def0f54d7f","name":"Start"},{"type":"TerminateGoal","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessage(\"Ask again when you need to update other NeedIt records\")"},"id":"01891a3a76e84761b7a78964eadd9a01","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"535d7fad531e407aae9af3abd06c78fe","name":"NeedIt Type","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","variable_id":"34b773068f954aa6921e801625d4b13a","message":{"type":"String","mode":"string","value":"gs.getMessage(\"What type of NeedIt record would you like to view?\")"},"optional":false},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"e659d4c01414438691471472a2387dfa","name":"Confirm NeedIt Type","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"d4c2ec58f977458a882c3f1f9053691c","name":"NeedIt List","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","variable_id":"97c58db880d84f64b1478c591bd79aae","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view."},"optional":false,"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"97c58db880d84f64b1478c591bd79aae","fields":["priority","short_description","u_when_needed"],"id":"1d30acbc57644ad5955bff4b65e34fb7","name":"NeedIt Card","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"InputPrompt","variable_id":"5f96fe0802b946418ea920333034ffcf","message":{"type":"String","mode":"string","value":"gs.getMessage(\"Would you like to view another NeedIt Record?\")"},"optional":false,"id":"b0307f90b41c4630ba9653e7dac77471","name":"Search again","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"b8bd36c124bf429e88ff25f15e9ab638","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"fcdb9efaad3c49859b289b05a32fd03c","name":"Yes"}],"id":"b8e943babcf54c219f64c266036105d9","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"InputPrompt","variable_id":"c676bf6dfd5345139d6e1a6f0078bc12","message":{"type":"String","mode":"string","value":"gs.getMessage(\"When do you need the NeedIt completed?\")"},"optional":false,"id":"c5d3738633d64df985d3af00f62b5e08","name":"New When Needed Date","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"97c58db880d84f64b1478c591bd79aae","id":"0f6fe93ba89447608841c831a1de57e8","name":"Change When Needed Date","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"97c58db880d84f64b1478c591bd79aae","fields":["short_description","u_when_needed"],"id":"b0986758f1954569bc33071ec1e33050","name":"Updated NeedIt","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"f0ff5224b247470c995c29a234ca1d06","name":"What to update","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","variable_id":"06c3b06cc8144020a51c15e067992884","message":{"type":"String","mode":"string","value":"gs.getMessage(\"What do you want to update?\")"},"optional":false},{"type":"Decision","name":"Update Field","branches":[{"type":"Branch","label":"When needed date","expression":{"type":"Applicability","mode":"query","value":"what_to_update=when"},"id":"5e14b293b44847f489ddd521e3bc3ceb","name":"When needed date"},{"type":"Branch","label":"Short description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=descr"},"id":"ea81d8f8af4648d1bb17a80934d7e859","name":"Short description"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=nothing"},"id":"0da19aa6321e40218d718bb5632b57dd","name":"Nothing"}],"id":"9e84dabd72d54fbc99b5d58e1e05c1f2","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"InputPrompt","variable_id":"5dd111cc374f4e159f6d59dd68268f9e","message":{"type":"String","mode":"string","value":"gs.getMessage(\"What shall be the new short description?\")"},"optional":false,"id":"243953b4a852408f953dba370a3d713a","name":"New short description","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"97c58db880d84f64b1478c591bd79aae","id":"391a8abbcc044f4f95ec407113e79af6","name":"Change short description","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"Decision","name":"search_count Value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()"},"id":"e92399f7bd1140059dcec1e64e03e8a7","name":"Less than 3"},{"type":"Branch","label":"3 or More","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    if (vaVars.search_count &lt; 3)\n\t        return false;\n\t    else\n\t        return true;\n\t})()"},"id":"8ae2c21e52c34ce08e2f33fe60f5493a","name":"3 or More"}],"id":"05668d82e804412889690f442d77fcc1","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()\n","id":"e49b016ca89b495bb2c634becf07d531","name":"Update search_count","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, inform users they will be transfered to a live agent\n\t    // otherwise, let them know how to work with more NeedIt records\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n\t})()"},"id":"da0d360446ea4bfca810a5d66aa8815a","name":"Quota reached","goal_id":"6be86811b0ea4d86a0acc4cbc6518921"},{"type":"ScriptedAction","script":"(function execute() {\n    //Transfer to a live agent\n    vaSystem.connectToAgent()\n})()\n","id":"4abcee3859414117b77a9cfa08db4a77","name":"Transfer to Agent","goal_id":"6be86811b0ea4d86a0acc4cbc6518921","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, return true\n\t    // otherwise, return false\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n\t})()"}}],"edges":[{"type":"Edge","source_node_id":"05668d82e804412889690f442d77fcc1","target_node_id":"535d7fad531e407aae9af3abd06c78fe","branch_id":"e92399f7bd1140059dcec1e64e03e8a7","id":"b51ee48383ec4b54894d52278b1517de","name":"e92399f7bd1140059dcec1e64e03e8a7"},{"type":"Edge","source_node_id":"ff5fc7104896499ba903b1def0f54d7f","target_node_id":"535d7fad531e407aae9af3abd06c78fe","id":"325d387542f14ec480059a1493f953d1"},{"type":"Edge","source_node_id":"535d7fad531e407aae9af3abd06c78fe","target_node_id":"e659d4c01414438691471472a2387dfa","id":"fb8ee12ed5e1485bb30c69dc8d3283be"},{"type":"Edge","source_node_id":"e659d4c01414438691471472a2387dfa","target_node_id":"d4c2ec58f977458a882c3f1f9053691c","id":"8889e1dfe9ce4ba78a135e15afdbd016"},{"type":"Edge","source_node_id":"d4c2ec58f977458a882c3f1f9053691c","target_node_id":"1d30acbc57644ad5955bff4b65e34fb7","id":"a0667efff10643a893dc850a50f6099b"},{"type":"Edge","source_node_id":"b0307f90b41c4630ba9653e7dac77471","target_node_id":"b8e943babcf54c219f64c266036105d9","id":"8ecba50150fd40cb9ce1c7f1224bd8fb"},{"type":"Edge","source_node_id":"b8e943babcf54c219f64c266036105d9","target_node_id":"01891a3a76e84761b7a78964eadd9a01","branch_id":"b8bd36c124bf429e88ff25f15e9ab638","id":"52fe2b42d24b412ca7c6e63b53a95461","name":"b8bd36c124bf429e88ff25f15e9ab638"},{"type":"Edge","source_node_id":"c5d3738633d64df985d3af00f62b5e08","target_node_id":"0f6fe93ba89447608841c831a1de57e8","id":"b9f03d48681d4739ad9455171cc325db"},{"type":"Edge","source_node_id":"0f6fe93ba89447608841c831a1de57e8","target_node_id":"b0986758f1954569bc33071ec1e33050","id":"0a677bb3abd24eaaa5c06ac345279b34"},{"type":"Edge","source_node_id":"b0986758f1954569bc33071ec1e33050","target_node_id":"b0307f90b41c4630ba9653e7dac77471","id":"a2415544626c466eb2581c5762d8c692"},{"type":"Edge","source_node_id":"1d30acbc57644ad5955bff4b65e34fb7","target_node_id":"f0ff5224b247470c995c29a234ca1d06","id":"bbe879436f23402c8defa4e5e452a652"},{"type":"Edge","source_node_id":"f0ff5224b247470c995c29a234ca1d06","target_node_id":"9e84dabd72d54fbc99b5d58e1e05c1f2","id":"a13240bf7ae44c32b68b28a955d0c727"},{"type":"Edge","source_node_id":"9e84dabd72d54fbc99b5d58e1e05c1f2","target_node_id":"c5d3738633d64df985d3af00f62b5e08","branch_id":"5e14b293b44847f489ddd521e3bc3ceb","id":"4aa985c3e70542d580b145c661ac1b54","name":"5e14b293b44847f489ddd521e3bc3ceb"},{"type":"Edge","source_node_id":"9e84dabd72d54fbc99b5d58e1e05c1f2","target_node_id":"243953b4a852408f953dba370a3d713a","branch_id":"ea81d8f8af4648d1bb17a80934d7e859","id":"f6a4b38f4a364fd4969e810b531ee5f5","name":"ea81d8f8af4648d1bb17a80934d7e859"},{"type":"Edge","source_node_id":"243953b4a852408f953dba370a3d713a","target_node_id":"391a8abbcc044f4f95ec407113e79af6","id":"06fdf94471c54ec4b5579cb2c020de1c"},{"type":"Edge","source_node_id":"391a8abbcc044f4f95ec407113e79af6","target_node_id":"b0986758f1954569bc33071ec1e33050","id":"152678adaa3c43f8940120cb700c7b57"},{"type":"Edge","source_node_id":"9e84dabd72d54fbc99b5d58e1e05c1f2","target_node_id":"b0307f90b41c4630ba9653e7dac77471","branch_id":"0da19aa6321e40218d718bb5632b57dd","id":"c097217f150c4110bb806c21379d9390","name":"0da19aa6321e40218d718bb5632b57dd"},{"type":"Edge","source_node_id":"b8e943babcf54c219f64c266036105d9","target_node_id":"e49b016ca89b495bb2c634becf07d531","branch_id":"fcdb9efaad3c49859b289b05a32fd03c","id":"be23bcf61d4c4a34bf3b87d3b465eac7","name":"fcdb9efaad3c49859b289b05a32fd03c"},{"type":"Edge","source_node_id":"e49b016ca89b495bb2c634becf07d531","target_node_id":"05668d82e804412889690f442d77fcc1","id":"ddeacefb8a664c709b41b7d7f7c03aba"},{"type":"Edge","source_node_id":"05668d82e804412889690f442d77fcc1","target_node_id":"da0d360446ea4bfca810a5d66aa8815a","branch_id":"8ae2c21e52c34ce08e2f33fe60f5493a","id":"10ed06be053345668bd305d8a52996f6","name":"8ae2c21e52c34ce08e2f33fe60f5493a"},{"type":"Edge","source_node_id":"da0d360446ea4bfca810a5d66aa8815a","target_node_id":"4abcee3859414117b77a9cfa08db4a77","id":"0d59831dd5c44cc1a9964ef2cd2dbfaf"},{"type":"Edge","source_node_id":"4abcee3859414117b77a9cfa08db4a77","target_node_id":"01891a3a76e84761b7a78964eadd9a01","id":"bdb874a4b5b14b00b65260a9d38c6413"}],"id":"6be86811b0ea4d86a0acc4cbc6518921"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"f1c969a522a849f88f3817011663db7d"}],"glide_variables":[{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"34b773068f954aa6921e801625d4b13a","name":"needit_type"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"},{"type":"Reference","table":"x_58872_needit_needit","id":"97c58db880d84f64b1478c591bd79aae","name":"needit_list"},{"type":"True/False","id":"5f96fe0802b946418ea920333034ffcf","name":"search_again"},{"type":"Date/Time","mode":"date","id":"c676bf6dfd5345139d6e1a6f0078bc12","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"ad96a754f04e44fb9a339ad27422d3fb","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"Short descriptuon","element":"descr"},{"name":"When needed date","element":"when"},{"name":"Nothing","element":"nothing"}],"id":"06c3b06cc8144020a51c15e067992884","name":"what_to_update"},{"type":"String","name":"new_short_description","id":"5dd111cc374f4e159f6d59dd68268f9e"},{"type":"Reference","table":"","id":"b55a868a5cfb45d9897cb50d89d6242f","name":"change_short_description"}],"roles":[],"scope":"339ab22b37823300ed0dded993990e20","id":"5e6b722337823300ed0dded993990e98","name":"Update NeedIt Records","key_phrases":["Update NeedIt Records","NeedIt Request"]}</design_definition>
        <design_topic_id>5e6b722337823300ed0dded993990e98</design_topic_id>
        <name>Update NeedIt Records</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-06-26 11:56:18</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>02413011379e7300ed0dded993990e39</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_336554_needit_vi">339ab22b37823300ed0dded993990e20</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">339ab22b37823300ed0dded993990e20</sys_scope>
        <sys_update_name>sys_cb_design_topic_02413011379e7300ed0dded993990e39</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-06-26 11:56:18</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
